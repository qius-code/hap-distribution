# ğŸš€ HAPåŒ…åˆ†å‘ç³»ç»Ÿ - éƒ¨ç½²æ€»ç»“

## å·²å®Œæˆçš„é…ç½®

### ğŸ“ é¡¹ç›®ç»“æ„
```
hap-distribution/
â”œâ”€â”€ ğŸ“± hap/                          # HAPåŒ…æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ AppSigned.hap                # æ‚¨çš„HAPå®‰è£…åŒ…
â”‚   â”œâ”€â”€ manifest-jsdelivr.json5      # jsDelivr CDNé…ç½®
â”‚   â”œâ”€â”€ manifest.json5               # æ ‡å‡†é…ç½®  
â”‚   â””â”€â”€ manifest-worker.json5        # Cloudflare Workeré…ç½®
â”œâ”€â”€ ğŸ¨ asset/                        # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ icon29.png                   # åº”ç”¨å°å›¾æ ‡
â”‚   â””â”€â”€ icon1024.png                 # åº”ç”¨å¤§å›¾æ ‡
â”œâ”€â”€ âš™ï¸ .github/workflows/            # GitHub Actionsé…ç½®
â”‚   â””â”€â”€ deploy.yml                   # è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥ä½œæµ
â”œâ”€â”€ ğŸ› ï¸ å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh                    # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ update-hap.sh                # HAPåŒ…æ›´æ–°å·¥å…·
â”œâ”€â”€ ğŸ“„ æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”‚   â”œâ”€â”€ deploy-config.md             # è¯¦ç»†é…ç½®æŒ‡å—
â”‚   â””â”€â”€ éƒ¨ç½²æ€»ç»“.md                   # æœ¬æ–‡æ¡£
â”œâ”€â”€ ğŸŒ GitHub Pagesé…ç½®
â”‚   â”œâ”€â”€ .nojekyll                    # ç¦ç”¨Jekyllå¤„ç†
â”‚   â”œâ”€â”€ index.html                   # åˆ†å‘é¡µé¢
â”‚   â”œâ”€â”€ _headers                     # HTTPå¤´é…ç½®
â”‚   â””â”€â”€ _redirects                   # é‡å®šå‘é…ç½®
â””â”€â”€ ğŸ”§ å…¶ä»–é…ç½®æ–‡ä»¶
    â”œâ”€â”€ wrangler.toml                # Cloudflare Workersé…ç½®
    â””â”€â”€ worker.js                    # Workerè„šæœ¬
```

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

#### âœ… å·²å®ç°
1. **GitHub + jsDelivr CDNåˆ†å‘**
   - å…¨çƒCDNåŠ é€Ÿ
   - è‡ªåŠ¨HTTPS
   - æ— æµé‡é™åˆ¶

2. **è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹**
   - ä¸€é”®éƒ¨ç½²è„šæœ¬ (`deploy.sh`)
   - GitHub Actionsè‡ªåŠ¨åŒ–
   - HAPåŒ…æ›´æ–°å·¥å…· (`update-hap.sh`)

3. **å¤šå¹³å°æ”¯æŒ**
   - GitHub Pagesé™æ€æ‰˜ç®¡
   - jsDelivrå…¨çƒCDN
   - Cloudflare Workersï¼ˆå¯é€‰ï¼‰

4. **ç‰ˆæœ¬ç®¡ç†**
   - è‡ªåŠ¨è®¡ç®—æ–‡ä»¶å“ˆå¸Œ
   - ç‰ˆæœ¬å·ç®¡ç†
   - æ–‡ä»¶å¤‡ä»½æœºåˆ¶

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### é¦–æ¬¡éƒ¨ç½²

1. **å‡†å¤‡å·¥ä½œ**
   ```bash
   # å…‹éš†é¡¹ç›®
   git clone <your-repo-url>
   cd hap-distribution
   
   # æ›¿æ¢HAPæ–‡ä»¶
   cp /path/to/your/app.hap hap/AppSigned.hap
   ```

2. **ä¸€é”®éƒ¨ç½²**
   ```bash
   # è¿è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
   ./deploy.sh
   ```

3. **å¯ç”¨GitHub Pages**
   - è®¿é—®ä»“åº“ Settings â†’ Pages
   - é€‰æ‹© Source: Deploy from a branch
   - é€‰æ‹© Branch: main

### æ›´æ–°HAPåŒ…

```bash
# ç®€å•æ›´æ–°
./update-hap.sh /path/to/new/app.hap

# æŒ‡å®šç‰ˆæœ¬å·æ›´æ–°
./update-hap.sh /path/to/new/app.hap 1.0.32
```

## ğŸŒ è®¿é—®åœ°å€

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨çš„HAPåŒ…å°†åœ¨ä»¥ä¸‹åœ°å€å¯ç”¨ï¼š

### ä¸»è¦åœ°å€
- **ğŸš€ jsDelivr CDN**: `https://cdn.jsdelivr.net/gh/{username}/{repo}@main/hap/AppSigned.hap`
- **ğŸ  GitHub Pages**: `https://{username}.github.io/{repo}/`
- **ğŸ“‹ é¡¹ç›®ä»“åº“**: `https://github.com/{username}/{repo}`

### ç®¡ç†åœ°å€  
- **ğŸ”„ ç¼“å­˜åˆ·æ–°**: `https://purge.jsdelivr.net/gh/{username}/{repo}@main/hap/AppSigned.hap`
- **ğŸ“Š CDNç»Ÿè®¡**: `https://data.jsdelivr.com/v1/stats/packages/gh/{username}/{repo}`

## âš™ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰åŸŸå
1. åœ¨ä»“åº“æ ¹ç›®å½•åˆ›å»º `CNAME` æ–‡ä»¶
2. é…ç½®DNSè®°å½•æŒ‡å‘GitHub Pages
3. åœ¨ä»“åº“è®¾ç½®ä¸­é…ç½®è‡ªå®šä¹‰åŸŸå

### CDNä¼˜åŒ–
- ä½¿ç”¨å¤šä¸ªCDNå¤‡ä»½èŠ‚ç‚¹
- é…ç½®HTTPç¼“å­˜ç­–ç•¥
- å¯ç”¨å‹ç¼©ä¼ è¾“

### ç›‘æ§é…ç½®
- GitHub Actionséƒ¨ç½²çŠ¶æ€
- CDNè®¿é—®ç»Ÿè®¡
- ä¸‹è½½æˆåŠŸç‡ç›‘æ§

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: jsDelivrè®¿é—®æ…¢ï¼Ÿ**
- ä½¿ç”¨å¤‡ç”¨CDNåœ°å€
- å°è¯•ä¸åŒçš„jsDelivrèŠ‚ç‚¹
- æ£€æŸ¥ç½‘ç»œè¿æ¥

**Q: GitHub Actionså¤±è´¥ï¼Ÿ**
- æ£€æŸ¥HAPæ–‡ä»¶æ˜¯å¦å­˜åœ¨
- éªŒè¯ä»“åº“æƒé™é…ç½®
- æŸ¥çœ‹Actionsæ—¥å¿—

**Q: æ›´æ–°ä¸ç”Ÿæ•ˆï¼Ÿ**
- ç­‰å¾…CDNåŒæ­¥ï¼ˆ5-10åˆ†é’Ÿï¼‰
- æ‰‹åŠ¨åˆ·æ–°CDNç¼“å­˜
- æ£€æŸ¥æ–‡ä»¶å“ˆå¸Œæ˜¯å¦æ›´æ–°

### è°ƒè¯•å·¥å…·

```bash
# æ£€æŸ¥æ–‡ä»¶å“ˆå¸Œ
sha256sum hap/AppSigned.hap

# æµ‹è¯•CDNå¯ç”¨æ€§
curl -I https://cdn.jsdelivr.net/gh/username/repo@main/hap/AppSigned.hap

# æŸ¥çœ‹GitçŠ¶æ€
git status
git log --oneline -5
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ–‡ä»¶å¤§å°ä¼˜åŒ–**
   - å‹ç¼©HAPåŒ…èµ„æº
   - ç§»é™¤ä¸å¿…è¦çš„æ–‡ä»¶
   - ä½¿ç”¨å¢é‡æ›´æ–°

2. **CDNé…ç½®**
   - è®¾ç½®åˆé€‚çš„ç¼“å­˜æ—¶é—´
   - å¯ç”¨Brotliå‹ç¼©
   - ä½¿ç”¨å¤šåŒºåŸŸèŠ‚ç‚¹

3. **ç‰ˆæœ¬ç®¡ç†**
   - è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
   - å®šæœŸæ¸…ç†æ—§ç‰ˆæœ¬
   - è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

- âœ… æ‰€æœ‰ä¼ è¾“ä½¿ç”¨HTTPS
- âœ… HAPåŒ…æ•°å­—ç­¾åéªŒè¯
- âœ… æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ
- âš ï¸ å®šæœŸæ›´æ–°ä¾èµ–åŒ…
- âš ï¸ ç›‘æ§è®¿é—®æ—¥å¿—

## ğŸ‰ éƒ¨ç½²å®Œæˆ

æ­å–œï¼æ‚¨çš„HAPåŒ…åˆ†å‘ç³»ç»Ÿå·²ç»æˆåŠŸé…ç½®ã€‚ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. ğŸŒ é€šè¿‡å…¨çƒCDNå¿«é€Ÿåˆ†å‘HAPåŒ…
2. ğŸ“± ç”¨æˆ·å¯ä»¥ç›´æ¥ä¸‹è½½å®‰è£…
3. ğŸ”„ è½»æ¾æ›´æ–°å’Œç‰ˆæœ¬ç®¡ç†
4. ğŸ“Š ç›‘æ§ä¸‹è½½ç»Ÿè®¡å’Œæ€§èƒ½

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–æäº¤Issueåé¦ˆã€‚ 